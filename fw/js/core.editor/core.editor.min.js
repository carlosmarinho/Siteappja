jQuery(document).ready(function(){jQuery("#frontend_editor_icon_edit").on("click",function(a){if(jQuery("#frontend_editor_overflow").length==0){jQuery("body").append('<div id="frontend_editor_overflow" class="frontend_editor_overflow"></div>')}jQuery("#frontend_editor_overflow").fadeIn(400);jQuery("#frontend_editor_button_cancel").val(PROHOST_STORAGE.strings["editor_caption_cancel"]);jQuery("#frontend_editor").slideDown();a.preventDefault();return false});jQuery("#frontend_editor_button_cancel").on("click",function(a){if(jQuery(this).val()==PROHOST_STORAGE.strings["editor_caption_close"]){window.location.reload()}else{jQuery("#frontend_editor").slideUp();jQuery("#frontend_editor_overflow").fadeOut(400)}a.preventDefault();return false});jQuery("#frontend_editor_button_save").on("click",function(c){var a=typeof(tinymce)!="undefined"?tinymce.activeEditor:false;if("mce_fullscreen"==a.id){tinymce.get("content").setContent(a.getContent({format:"raw"}),{format:"raw"})}tinymce.triggerSave();var b={action:"frontend_editor_save",nonce:PROHOST_STORAGE.ajax_nonce,data:jQuery("#frontend_editor form").serialize()};jQuery.post(PROHOST_STORAGE.ajax_url,b,function(d){var g={};try{g=JSON.parse(d)}catch(f){g={error:PROHOST_STORAGE.ajax_error};console.log(d)}if(g.error==""){prohost_message_success("",PROHOST_STORAGE.strings["editor_save_success"]);jQuery("#frontend_editor_button_cancel").val(PROHOST_STORAGE.strings["editor_caption_close"])}else{prohost_message_warning(g.error,PROHOST_STORAGE.strings["editor_save_error"])}});c.preventDefault();return false});jQuery("#frontend_editor_icon_delete").on("click",function(a){prohost_message_confirm(PROHOST_STORAGE.strings["editor_delete_post"],PROHOST_STORAGE.strings["editor_delete_post_header"],function(b){if(b!=1){return}var c={action:"frontend_editor_delete",post_id:jQuery("#frontend_editor form #frontend_editor_post_id").val(),nonce:PROHOST_STORAGE.ajax_nonce};jQuery.post(PROHOST_STORAGE.ajax_url,c,function(d){var g={};try{g=JSON.parse(d)}catch(f){g={error:PROHOST_STORAGE.ajax_error};console.log(d)}if(g.error==""){prohost_message_success("",PROHOST_STORAGE.strings["editor_delete_success"]);setTimeout(function(){window.location.href=PROHOST_STORAGE.site_url},1000)}else{prohost_message_warning(g.error,PROHOST_STORAGE.strings["editor_delete_error"])}})});a.preventDefault();return false})});